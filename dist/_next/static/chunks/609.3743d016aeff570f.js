(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{2406:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=2406,e.exports=t},3311:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var r=a(7437),s=a(2635),n=a(9354),l=a(7964),i=a(7170),o=a(2265),c=a(5038),d=a(7223),g=a(9797),h=a(4938),u=a(1098);let m={unpressed:{scale:[null,.85,1],opacity:1},pressed:{scale:.85,opacity:.7,transition:{type:"spring",duration:.3,bounce:.5}}},x=(0,h.j)("inline-flex items-center justify-center focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{outline:"rounded-md border border-accent bg-foreground px-2 py-1 text-sm text-primary disabled:bg-foreground/50 disabled:text-primary/50",focus:"rounded-md border border-accent bg-accent px-2 py-1 text-sm text-primary disabled:bg-accent/50 disabled:text-primary/50",danger:"rounded-md border border-danger/20 bg-dangerForeground px-2 py-1 text-sm text-danger disabled:bg-dangerForeground/50 disabled:text-danger/50",warning:"rounded-md border border-warning/20 bg-warningForeground px-2 py-1 text-sm text-warning disabled:bg-warningForeground/50 disabled:text-warning/50",success:"rounded-md border border-success/20 bg-successForeground px-2 py-1 text-sm text-success disabled:bg-successForeground/50 disabled:text-success/50",action:"rounded-md border border-action/20 bg-actionForeground px-2 py-1 text-sm text-action disabled:bg-actionForeground/50 disabled:text-action/50"}}}),f=o.forwardRef((e,t)=>{let{className:a,variant:s,onStart:l,...i}=e,[c,d]=(0,o.useState)(!1);return(0,r.jsx)(u.E.button,{ref:t,variants:m,initial:!1,animate:c?"pressed":"unpressed",transition:{type:"spring",duration:.3,bounce:.5},onTapStart:()=>{d(!0)},onTap:()=>{d(!1)},onTapCancel:()=>{d(!1)},className:(0,n.cn)(x({variant:s,className:a})),...i})});f.displayName="Button";var p=a(795);a(9837);var b=a(9278),y=a(7899);let v=[{id:"1",src:"/background/1-min.jpg",alt:"Background 1"},{id:"2",src:"/background/2-min.jpg",alt:"Background 2"},{id:"3",src:"/background/3-min.jpg",alt:"Background 3"},{id:"4",src:"/background/4-min.jpg",alt:"Background 4"},{id:"5",src:"/background/5-min.jpg",alt:"Background 5"},{id:"6",src:"/background/6-min.jpg",alt:"Background 6"},{id:"7",src:"/background/7-min.jpg",alt:"Background 7"},{id:"8",src:"/background/8-min.jpg",alt:"Background 8"},{id:"9",src:"/background/9-min.jpg",alt:"Background 9"},{id:"10",src:"/background/10-min.jpg",alt:"Background 10"},{id:"11",src:"/background/11-min.jpg",alt:"Background 11"},{id:"12",src:"/background/12-min.jpg",alt:"Background 12"},{id:"13",src:"/background/13-min.jpg",alt:"Background 13"},{id:"14",src:"/background/14-min.jpg",alt:"Background 14"},{id:"15",src:"/background/15-min.jpg",alt:"Background 15"},{id:"16",src:"/background/16-min.jpg",alt:"Background 16"},{id:"17",src:"/background/17-min.jpg",alt:"Background 17"}];function w(e){let{selectedBackground:t,onSelectBackground:a,rightElement:s}=e,[l,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(0),g=Math.ceil(v.length/5);(0,o.useEffect)(()=>{Promise.all(v.slice(0,6).map(e=>new Promise(t=>{let a=new Image;a.src=e.src,a.onload=t,a.onerror=t}))).then(()=>{i(!0)})},[]);let h=(0,o.useCallback)(e=>{a(e)},[a]),u=[...v].slice(5*c,(c+1)*5);return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Background Images"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:s||(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[c+1,"/",g]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{d(e=>0===e?g-1:e-1)},className:"flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200 transition","aria-label":"Previous page",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3.5 w-3.5",children:(0,r.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,r.jsx)("button",{type:"button",onClick:()=>{d(e=>e===g-1?0:e+1)},className:"flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200 transition","aria-label":"Next page",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3.5 w-3.5",children:(0,r.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]})]})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:(0,n.cn)("grid grid-cols-3 sm:grid-cols-5 md:grid-cols-6 gap-2 transition-all duration-300",!l&&"opacity-50"),children:[(0,r.jsx)("button",{onClick:()=>h(null),className:(0,n.cn)("aspect-square rounded-lg p-0.5 transition-all overflow-hidden",null===t?"ring-2 ring-[#6C5CE7] ring-offset-2":"ring-1 ring-gray-200 hover:ring-[#6C5CE7]/50"),"aria-label":"No background/transparent",children:(0,r.jsx)("div",{className:"h-full w-full rounded-md bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGElEQVQYlWNgYGCQwoKxgqGgcJA5h3yFAAs8BRWVSwooAAAAAElFTkSuQmCC')] bg-repeat flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500 bg-white/70 px-1.5 py-0.5 rounded",children:"None"})})}),u.map(e=>(0,r.jsxs)("button",{onClick:()=>h(e.src),className:(0,n.cn)("aspect-square rounded-lg p-0.5 transition-all overflow-hidden relative",t===e.src?"ring-2 ring-[#6C5CE7] ring-offset-2":"ring-1 ring-gray-200 hover:ring-[#6C5CE7]/50"),"aria-label":e.alt,children:[(0,r.jsx)("img",{src:e.src,alt:e.alt,className:"h-full w-full object-cover rounded-md",loading:parseInt(e.id)>6?"lazy":"eager"}),t===e.src&&(0,r.jsx)("div",{className:"absolute -right-1 -top-1 size-3 rounded-full bg-[#6C5CE7] ring-2 ring-white shadow-md",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full p-0.5",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]},e.id))]}),(0,r.jsx)("div",{className:"mt-4 flex justify-center gap-1.5",children:Array.from({length:g}).map((e,t)=>(0,r.jsx)("button",{onClick:()=>d(t),className:(0,n.cn)("h-1.5 w-6 rounded-full transition-all",c===t?"bg-[#6C5CE7]":"bg-gray-200 hover:bg-gray-300"),"aria-label":"Go to page ".concat(t+1)},t))})]})]})}var j=e=>{let{min:t,max:a,value:s,onChange:n,label:l}=e;return(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[l&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:l}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:s})]}),(0,r.jsx)("input",{type:"range",min:t,max:a,value:s,onChange:e=>n(parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]})},k=e=>{let{originalImage:t,removedBgImage:a,mask:s,onSave:l,onClose:i,isInline:c=!1}=e,g=(0,o.useRef)(null),h=(0,o.useRef)(null),u=(0,o.useRef)(null),[m,x]=(0,o.useState)(20),[f,p]=(0,o.useState)("restore"),[b,y]=(0,o.useState)(!1),[v,w]=(0,o.useState)(1),[k,C]=(0,o.useState)(null),[N,A]=(0,o.useState)(null),[E,S]=(0,o.useState)([]),[I,z]=(0,o.useState)(-1),[B,R]=(0,o.useState)(!0),[M,U]=(0,o.useState)({x:0,y:0}),[T,F]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=new Image;e.onload=()=>{C(e)},e.src=t;let r=new Image;r.onload=()=>{A(r)},r.src=a},[t,a]),(0,o.useEffect)(()=>{if(!k||!N||!g.current||!h.current)return;let e=g.current,t=e.getContext("2d");if(!t)return;let a=h.current;if(a.getContext("2d")){if(e.width=k.width,e.height=k.height,a.width=k.width,a.height=k.height,t.drawImage(N,0,0),s){let e=new Image;e.onload=()=>{t&&(t.drawImage(e,0,0),L())},e.src=s}else L();W()}},[k,N]),(0,o.useEffect)(()=>{Y()},[B,N]);let D=(0,o.useCallback)(e=>{let t,a;if(!b||!g.current)return;let r=g.current,s=r.getContext("2d");if(!s||!k||!N)return;let n=r.getBoundingClientRect();"touches"in e?(t=(e.touches[0].clientX-n.left)/v,a=(e.touches[0].clientY-n.top)/v,U({x:e.touches[0].clientX,y:e.touches[0].clientY})):(t=(e.clientX-n.left)/v,a=(e.clientY-n.top)/v,U({x:e.clientX,y:e.clientY})),s.globalCompositeOperation="restore"===f?"source-over":"destination-out",s.beginPath(),s.arc(t,a,m/2,0,2*Math.PI),"restore"===f?(s.save(),s.clip(),s.drawImage(k,0,0),s.restore()):(s.fillStyle="rgba(0, 0, 0, 1)",s.fill()),Y()},[b,m,f,v,k,N]),W=(0,o.useCallback)(()=>{if(!u.current||!g.current||!k)return;let e=u.current.clientWidth,t=u.current.clientHeight;w((k.width/k.height>e/t?e/k.width:t/k.height)*.9)},[k]),Y=(0,o.useCallback)(()=>{if(!h.current||!g.current||!B)return;let e=h.current,t=e.getContext("2d",{willReadFrequently:!0}),a=g.current,r=a.getContext("2d",{willReadFrequently:!0});if(t&&r&&(t.clearRect(0,0,e.width,e.height),B)){let s=r.getImageData(0,0,a.width,a.height).data,n=t.createImageData(e.width,e.height),l=n.data;for(let e=0;e<s.length;e+=4)s[e+3]<128&&(l[e]=255,l[e+1]=0,l[e+2]=128,l[e+3]=100);t.putImageData(n,0,0)}},[B]),L=(0,o.useCallback)(()=>{if(!g.current)return;let e=g.current.toDataURL();I<E.length-1&&S(e=>e.slice(0,I+1)),S(t=>[...t,{dataURL:e}]),z(e=>e+1)},[E,I]),O=(0,o.useCallback)(e=>{if(e<0||e>=E.length||!g.current)return;let t=g.current,a=t.getContext("2d");if(!a)return;let r=new Image;r.onload=()=>{a.clearRect(0,0,t.width,t.height),a.globalCompositeOperation="source-over",a.drawImage(r,0,0),Y()},r.src=E[e].dataURL,z(e)},[E,Y]),P=(0,o.useCallback)(()=>{I>0&&O(I-1)},[I,O]),G=(0,o.useCallback)(()=>{I<E.length-1&&O(I+1)},[I,E.length,O]),Q=(0,o.useCallback)(()=>{g.current&&l(g.current.toDataURL())},[l]),_=(0,o.useCallback)(e=>{y(!0),D(e)},[D]),V=(0,o.useCallback)(()=>{b&&(y(!1),L())},[b,L]);(0,o.useEffect)(()=>{let e=()=>{W()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[W]);let q=()=>(0,r.jsxs)("div",{className:"flex flex-col space-y-4 w-full",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Brush Tools"}),(0,r.jsxs)("div",{className:"flex overflow-hidden rounded-lg border border-gray-200",children:[(0,r.jsxs)("button",{onClick:()=>p("restore"),className:(0,n.cn)("flex-1 flex items-center justify-center gap-1 px-3 py-2 text-sm font-medium transition-all","restore"===f?"bg-[#6C5CE7] text-white":"bg-white text-gray-500 hover:bg-gray-50"),children:[(0,r.jsx)(d.r3Y,{className:"size-4"}),(0,r.jsx)("span",{children:"Restore"})]}),(0,r.jsxs)("button",{onClick:()=>p("remove"),className:(0,n.cn)("flex-1 flex items-center justify-center gap-1 px-3 py-2 text-sm font-medium transition-all","remove"===f?"bg-[#6C5CE7] text-white":"bg-white text-gray-500 hover:bg-gray-50"),children:[(0,r.jsx)(d.q_8,{className:"size-4"}),(0,r.jsx)("span",{children:"Remove"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Brush Size"}),(0,r.jsx)(j,{min:1,max:100,value:m,onChange:x})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"History"}),(0,r.jsxs)("div",{className:"flex overflow-hidden rounded-lg border border-gray-200",children:[(0,r.jsxs)("button",{onClick:P,disabled:I<=0,className:(0,n.cn)("flex-1 flex items-center justify-center gap-1 px-3 py-2 text-sm font-medium transition-all",I<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-500 hover:bg-gray-50"),children:[(0,r.jsx)(d.Ezj,{className:"size-4"}),(0,r.jsx)("span",{children:"Undo"})]}),(0,r.jsxs)("button",{onClick:G,disabled:I>=E.length-1,className:(0,n.cn)("flex-1 flex items-center justify-center gap-1 px-3 py-2 text-sm font-medium transition-all",I>=E.length-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-500 hover:bg-gray-50"),children:[(0,r.jsx)(d.dPq,{className:"size-4"}),(0,r.jsx)("span",{children:"Redo"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Display Options"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"show-transparent",checked:B,onChange:()=>R(!B),className:"rounded border-gray-200 text-[#6C5CE7] focus:ring-[#6C5CE7]"}),(0,r.jsx)("label",{htmlFor:"show-transparent",className:"text-sm text-gray-600 dark:text-gray-400",children:"Highlight transparent areas"})]})]})]}),H=()=>(0,r.jsxs)("div",{className:"md:hidden flex justify-between items-center px-3 py-2 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:P,disabled:I<=0,className:(0,n.cn)("p-2 rounded-full",I<=0?"text-gray-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:(0,r.jsx)(d.Ezj,{className:"size-5"})}),(0,r.jsx)("button",{onClick:G,disabled:I>=E.length-1,className:(0,n.cn)("p-2 rounded-full",I>=E.length-1?"text-gray-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:(0,r.jsx)(d.dPq,{className:"size-5"})})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>p("restore"),className:(0,n.cn)("p-2 rounded-full","restore"===f?"bg-[#6C5CE7] text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:(0,r.jsx)(d.r3Y,{className:"size-5"})}),(0,r.jsx)("button",{onClick:()=>p("remove"),className:(0,n.cn)("p-2 rounded-full","remove"===f?"bg-[#6C5CE7] text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:(0,r.jsx)(d.q_8,{className:"size-5"})}),(0,r.jsx)("button",{onClick:()=>F(!T),className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,r.jsx)(d.C5v,{className:"size-5"})})]})]});return(0,r.jsx)(r.Fragment,{children:c?(0,r.jsxs)("div",{className:"flex flex-col w-full h-[70vh] max-h-[70vh]",children:[(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsxs)("div",{className:"hidden md:flex w-64 p-4 border-r border-gray-200 dark:border-gray-700 flex-col space-y-4",children:[(0,r.jsx)(q,{}),(0,r.jsx)("div",{className:"mt-auto",children:(0,r.jsxs)("button",{onClick:Q,className:"w-full flex items-center justify-center gap-2 rounded-lg bg-[#6C5CE7] px-4 py-2 text-sm font-medium text-white hover:bg-[#5B4ED1] transition-colors",children:[(0,r.jsx)(d.UnI,{className:"size-4"}),"Save Changes"]})})]}),(0,r.jsxs)("div",{ref:u,className:"flex-1 overflow-auto bg-gray-100 dark:bg-gray-900 relative flex items-center justify-center",children:[(0,r.jsxs)("div",{className:"relative",style:{transform:"scale(".concat(v,")")},children:[(0,r.jsx)("canvas",{ref:g,onMouseDown:_,onMouseMove:D,onMouseUp:V,onMouseLeave:V,onTouchStart:_,onTouchMove:D,onTouchEnd:V,className:"touch-none"}),(0,r.jsx)("canvas",{ref:h,className:"absolute top-0 left-0 pointer-events-none touch-none"})]}),b&&(0,r.jsx)("div",{className:"absolute rounded-full border-2 border-white pointer-events-none",style:{width:m*v,height:m*v,border:"2px solid white",boxShadow:"0 0 0 1px black",marginLeft:"-"+m*v/2+"px",marginTop:"-"+m*v/2+"px",transform:"translate(".concat(M.x,"px, ").concat(M.y,"px)"),display:b?"block":"none"}})]})]}),T&&(0,r.jsx)("div",{className:"md:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>F(!1),children:(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-gray-800 rounded-t-xl p-4",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-4"}),(0,r.jsx)(q,{}),(0,r.jsx)("button",{onClick:()=>F(!1),className:"mt-4 w-full flex items-center justify-center gap-2 rounded-lg bg-gray-200 dark:bg-gray-700 px-4 py-2 text-sm font-medium",children:"Close"})]})}),(0,r.jsx)(H,{}),(0,r.jsx)("div",{className:"md:hidden fixed bottom-16 right-4 z-30",children:(0,r.jsx)("button",{onClick:Q,className:"flex items-center justify-center gap-2 rounded-full bg-[#6C5CE7] p-3 text-white shadow-lg",children:(0,r.jsx)(d.UnI,{className:"size-6"})})})]}):(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl flex flex-col w-11/12 h-[90vh] max-w-6xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Mask"}),(0,r.jsx)("button",{onClick:i,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500",children:(0,r.jsx)(d.APH,{className:"size-6"})})]}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsxs)("div",{className:"hidden md:flex w-64 p-4 border-r border-gray-200 dark:border-gray-700 flex-col space-y-4",children:[(0,r.jsx)(q,{}),(0,r.jsx)("div",{className:"mt-auto",children:(0,r.jsxs)("button",{onClick:Q,className:"w-full flex items-center justify-center gap-2 rounded-lg bg-[#6C5CE7] px-4 py-2 text-sm font-medium text-white hover:bg-[#5B4ED1] transition-colors",children:[(0,r.jsx)(d.UnI,{className:"size-4"}),"Save Changes"]})})]}),(0,r.jsxs)("div",{ref:u,className:"flex-1 overflow-auto bg-gray-100 dark:bg-gray-900 relative flex items-center justify-center",children:[(0,r.jsxs)("div",{className:"relative",style:{transform:"scale(".concat(v,")")},children:[(0,r.jsx)("canvas",{ref:g,onMouseDown:_,onMouseMove:D,onMouseUp:V,onMouseLeave:V,onTouchStart:_,onTouchMove:D,onTouchEnd:V,className:"touch-none"}),(0,r.jsx)("canvas",{ref:h,className:"absolute top-0 left-0 pointer-events-none touch-none"})]}),b&&(0,r.jsx)("div",{className:"absolute rounded-full border-2 border-white pointer-events-none",style:{width:m*v,height:m*v,border:"2px solid white",boxShadow:"0 0 0 1px black",marginLeft:"-"+m*v/2+"px",marginTop:"-"+m*v/2+"px",transform:"translate(".concat(M.x,"px, ").concat(M.y,"px)"),display:b?"block":"none"}})]})]}),T&&(0,r.jsx)("div",{className:"md:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>F(!1),children:(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-gray-800 rounded-t-xl p-4",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-4"}),(0,r.jsx)(q,{}),(0,r.jsx)("button",{onClick:()=>F(!1),className:"mt-4 w-full flex items-center justify-center gap-2 rounded-lg bg-gray-200 dark:bg-gray-700 px-4 py-2 text-sm font-medium",children:"Close"})]})}),(0,r.jsx)(H,{}),(0,r.jsx)("div",{className:"md:hidden fixed bottom-16 right-4 z-30",children:(0,r.jsx)("button",{onClick:Q,className:"flex items-center justify-center gap-2 rounded-full bg-[#6C5CE7] p-3 text-white shadow-lg",children:(0,r.jsx)(d.UnI,{className:"size-6"})})})]})})})};let C=[{id:"transparent",color:"transparent"},{id:"white",color:"#FFFFFF"},{id:"black",color:"#000000"},{id:"purple",color:"#800080"},{id:"pink",color:"#FFC0CB"},{id:"yellow",color:"#FFFF00"}];function N(){let[e,t]=(0,o.useState)(!0),[a,h]=(0,o.useState)(!1),[u,m]=(0,o.useState)(null),[x,v]=(0,o.useState)("transparent"),[j,N]=(0,o.useState)(!1),[A,E]=(0,o.useState)(!1),[S,I]=(0,o.useState)("#6C5CE7"),[z,B]=(0,o.useState)(!1),[R,M]=(0,o.useState)(!1),[U,T]=(0,o.useState)(!1),[F,D]=(0,o.useState)(!1),[W,Y]=(0,o.useState)("crop"),[L,O]=(0,o.useState)(null),[P,G]=(0,o.useState)(),[Q,_]=(0,o.useState)(),[V,q]=(0,o.useState)(null),[H,K]=(0,o.useState)(!1),[X,J]=(0,o.useState)(null),[$,Z]=(0,o.useState)(null),[ee,et]=(0,o.useState)(!1),[ea,er]=(0,o.useState)({x:0,y:0}),[es,en]=(0,o.useState)(null),[el,ei]=(0,o.useState)(!1),[eo,ec]=(0,o.useState)(1),ed=(0,o.useRef)(null),eg=(0,o.useRef)(null),eh=(0,o.useRef)(null),eu=(0,o.useRef)(null),em=(0,s.oR)(),ex=(0,s.Q)("images"),ef=(0,o.useRef)(null),ep=(0,o.useRef)(null),eb=(0,o.useRef)(!0),ey=e=>{console.error("Error loading model:",e),m(e instanceof Error?e:Error("Failed to load model")),t(!1)},{getRootProps:ev,getInputProps:ew,isDragActive:ej,isDragAccept:ek,isDragReject:eC}=(0,c.uI)({onDrop:(0,o.useCallback)(e=>{E(!1),N(!1);let t=async e=>new Promise((t,a)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>{let s=r.result,n=new Image;n.src=s,n.onload=()=>{null==em||em.transaction(()=>{em.addRow("images",{name:e.name,size:e.size,imageUrl:s,mediaType:e.type,height:n.height,width:n.width})}),t()},n.onerror=()=>{a(Error("Failed to load image"))}},r.onerror=e=>{a(e),g.Am.error("Error converting file to base64:".concat(e))}});(async()=>{try{for(let a of e)await t(a)}catch(e){console.error("Error processing files:",e)}})()},[em]),accept:{"image/*":[".jpeg",".jpg",".png"]}}),eN=(0,o.useCallback)(async()=>{try{let e=ef.current,t=ep.current;if(!e||!t||!(null==em?void 0:em.hasTable("images"))||0===ex.length)return;for(let a=0;a<ex.length;a++)if(null==em||!em.getCell("images","".concat(ex[a]),"transformedImageUrl"))try{let r=await l.OPz.fromURL(null==em?void 0:em.getCell("images","".concat(ex[a]),"imageUrl")),{pixel_values:s}=await t(r),{output:n}=await e({input:s}),i=(await l.OPz.fromTensor(n[0].mul(255).to("uint8")).resize(r.width,r.height)).data,o=document.createElement("canvas");o.width=r.width,o.height=r.height;let c=o.getContext("2d");if(c){c.drawImage(r.toCanvas(),0,0);let e=c.getImageData(0,0,r.width,r.height);for(let t=0;t<i.length;++t)e.data[4*t+3]=i[t];if(c.putImageData(e,0,0),"transparent"===x||H){if(H&&V){let e=new Image;await new Promise(t=>{e.onload=()=>{let a=document.createElement("canvas");a.width=o.width,a.height=o.height;let r=a.getContext("2d");if(r){let t,s,n,l;let i=e.width/e.height,d=o.width/o.height;i>d?(l=e.height,n=e.height*d,t=(e.width-n)/2,s=0):(n=e.width,l=e.width/d,t=0,s=(e.height-l)/2),r.drawImage(e,t,s,n,l,0,0,a.width,a.height),r.drawImage(o,0,0),c.clearRect(0,0,o.width,o.height),c.drawImage(a,0,0)}t()},e.onerror=()=>{console.error("Error loading background image"),t()},e.src=V})}}else{let e=document.createElement("canvas");e.width=o.width,e.height=o.height;let t=e.getContext("2d");t&&(t.fillStyle=x,t.fillRect(0,0,e.width,e.height),t.drawImage(o,0,0),c.clearRect(0,0,o.width,o.height),c.drawImage(e,0,0))}let t=o.toDataURL("image/png");await new Promise(e=>{null==em||em.transaction(()=>{null==em||em.setCell("images","".concat(ex[a]),"transformedImageUrl",t),null==em||em.setCell("images","".concat(ex[a]),"width",o.width),null==em||em.setCell("images","".concat(ex[a]),"height",o.height),null==em||em.setCell("images","".concat(ex[a]),"mediaType","image/png"),e()})})}n[0].dispose(),s.dispose()}catch(e){console.error("Error processing image:",e);continue}return E(!0),N(!0),!0}catch(e){return console.error("Error in processImages:",e),!1}finally{h(!1)}},[ex,x,em,H,V]);(0,o.useEffect)(()=>((async()=>{try{let e={log:console.log,warn:console.warn,error:console.error,info:console.info},a=[/github\.com/i,/huggingface/i,/transformers/i,/model/i,/RMBG/i,/briaai/i,/pretrained/i,/loading/i,/http/i,/processor/i],r=t=>function(){for(var r=arguments.length,s=Array(r),n=0;n<r;n++)s[n]=arguments[n];s.some(e=>a.some(t=>String(e).match(t)))||e[t].apply(console,s)};console.log=r("log"),console.warn=r("warn"),console.error=r("error"),console.info=r("info");let s="briaai/RMBG-1.4";try{if(ef.current=await l.$Sz.from_pretrained(s,{device:"gpu"in navigator?"webgpu":"cpu"}).catch(e=>(ey(e),null)),!ef.current||(ep.current=await l.Za9.from_pretrained(s,{device:"gpu"in navigator?"webgpu":"cpu"}).catch(e=>(ey(e),null)),!ep.current))return;console.log=e.log,console.warn=e.warn,console.error=e.error,console.info=e.info,t(!1)}catch(e){ey(e);return}}catch(e){ey(e)}})(),()=>{ef.current&&(ef.current=null),ep.current&&(ep.current=null)}),[em]),(0,o.useEffect)(()=>{(async()=>{!e&&eb.current&&ex.length>0&&(h(!0),await eN())})()},[ex,eN,e]),(0,o.useEffect)(()=>()=>{h(!1),E(!1),N(!1),v("transparent"),B(!1),M(!1),T(!1),D(!1),G(void 0),_(void 0),q(null),K(!1),Z(null),(null==em?void 0:em.hasTable("images"))&&em.transaction(()=>{em.delTable("images")}),ef.current&&(ef.current=null),ep.current&&(ep.current=null)},[em]);let eA=async()=>{let e=ex[0],t=null==em?void 0:em.getCell("images",e,"name"),a=null==em?void 0:em.getCell("images",e,"transformedImageUrl"),r=document.createElement("canvas"),s=new Image;s.onload=()=>{r.width=s.width,r.height=s.height;let e=r.getContext("2d");if(e){if(H&&V){let a=new Image;a.onload=()=>{let n,l,o,c;let d=a.width/a.height,g=r.width/r.height;d>g?(c=a.height,o=a.height*g,n=(a.width-o)/2,l=0):(o=a.width,c=a.width/g,n=0,l=(a.height-c)/2),e.drawImage(a,n,l,o,c,0,0,r.width,r.height),e.drawImage(s,0,0),r.toBlob(e=>{e&&(0,i.saveAs)(e,t)},"image/png")},a.src=V}else"transparent"!==x&&(e.fillStyle=x,e.fillRect(0,0,r.width,r.height)),e.drawImage(s,0,0),r.toBlob(e=>{e&&(0,i.saveAs)(e,t)},"image/png")}},s.src=a},eE=()=>{if(ee&&(en(null),(null==em?void 0:em.hasTable("images"))&&ex.length>0))try{let e=ex[0],t={};try{let a=localStorage.getItem("image-settings-".concat(e));a&&(t=JSON.parse(a))}catch(e){console.error("Error parsing existing settings:",e)}let a={...t,position:ea};localStorage.setItem("image-settings-".concat(e),JSON.stringify(a))}catch(e){console.error("Error saving position to localStorage:",e)}},eS=e=>{el&&(en({x:"touches"in e?e.touches[0].clientX:e.clientX,y:"touches"in e?e.touches[0].clientY:e.clientY}),e.preventDefault())},eI=e=>{if(!el||!es)return;let t="touches"in e?e.touches[0].clientX:e.clientX,a="touches"in e?e.touches[0].clientY:e.clientY;es.x;let r=Math.max(.2,Math.min(3,eo+-(.01*(a-es.y))));if(ec(r),en({x:t,y:a}),(null==em?void 0:em.hasTable("images"))&&ex.length>0)try{let e=ex[0],t={};try{let a=localStorage.getItem("image-settings-".concat(e));a&&(t=JSON.parse(a))}catch(e){console.error("Error parsing existing settings:",e)}let a={...t,scale:r};localStorage.setItem("image-settings-".concat(e),JSON.stringify(a))}catch(e){console.error("Error saving scale to localStorage:",e)}e.preventDefault()},ez=e=>{el&&(en(null),e.preventDefault())},eB=(0,o.useCallback)(()=>{if(eh.current){if(ee||el){let e=document.getElementById("crop-container");if(!e)return;let t=document.createElement("canvas"),a=t.getContext("2d");if(!a)return;let r=e.getBoundingClientRect();t.width=r.width,t.height=r.height;let s=document.createElement("canvas"),n=s.getContext("2d");if(!n)return;if(s.width=r.width,s.height=r.height,H&&V){let e=new Image;e.onload=()=>{let l,o,c,d;let g=e.width/e.height,h=s.width/s.height;g>h?(d=e.height,c=e.height*h,l=(e.width-c)/2,o=0):(c=e.width,d=e.width/h,l=0,o=(e.height-d)/2),n.drawImage(e,l,o,c,d,0,0,s.width,s.height);let u=eh.current,m=u.getBoundingClientRect(),x=r.width/2,f=r.height/2,p=m.width,b=m.height,y=x-p/2+ea.x,v=f-b/2+ea.y;n.drawImage(u,y,v,p,b),a.drawImage(s,0,0),t.toBlob(e=>{if(!e)return;let t=(null==em?void 0:em.getCell("images",ex[0],"name")).replace(/\.(png|jpg|jpeg|gif)$/i,"");(0,i.saveAs)(e,"".concat(t,"_").concat(el?"resized":"positioned",".png")),M(!1),et(!1),ei(!1)},"image/png")},e.src=V}else{n.fillStyle="transparent"===x?"rgba(0, 0, 0, 0)":x,n.fillRect(0,0,s.width,s.height);let e=eh.current,l=e.getBoundingClientRect(),o=r.width/2,c=r.height/2,d=l.width,g=l.height,h=o-d/2+ea.x,u=c-g/2+ea.y;n.drawImage(e,h,u,d,g),a.drawImage(s,0,0),t.toBlob(e=>{if(!e)return;let t=(null==em?void 0:em.getCell("images",ex[0],"name")).replace(/\.(png|jpg|jpeg|gif)$/i,"");(0,i.saveAs)(e,"".concat(t,"_").concat(el?"resized":"positioned",".png")),M(!1),et(!1),ei(!1)},"image/png")}return}if(!Q||Q.width<5&&Q.height<5){let e=document.getElementById("crop-container");if(!e)return;let t=document.createElement("canvas"),a=t.getContext("2d");if(!a)return;let r=e.getBoundingClientRect();t.width=r.width,t.height=r.height;let s=document.createElement("canvas"),n=s.getContext("2d");if(!n)return;if(s.width=r.width,s.height=r.height,H&&V){let e=new Image;e.onload=()=>{let l,o,c,d;let g=e.width/e.height,h=s.width/s.height;g>h?(d=e.height,c=e.height*h,l=(e.width-c)/2,o=0):(c=e.width,d=e.width/h,l=0,o=(e.height-d)/2),n.drawImage(e,l,o,c,d,0,0,s.width,s.height);let u=eh.current,m=u.getBoundingClientRect(),x=(r.width-m.width)/2+ea.x,f=(r.height-m.height)/2+ea.y;n.drawImage(u,x,f,m.width,m.height),a.drawImage(s,0,0),t.toBlob(e=>{if(!e)return;let t=(null==em?void 0:em.getCell("images",ex[0],"name")).replace(/\.(png|jpg|jpeg|gif)$/i,"");(0,i.saveAs)(e,"".concat(t,"_full.png")),M(!1),et(!1),ei(!1)},"image/png")},e.src=V}else{n.fillStyle="transparent"===x?"rgba(0, 0, 0, 0)":x,n.fillRect(0,0,s.width,s.height);let e=eh.current,l=e.getBoundingClientRect(),o=(r.width-l.width)/2+ea.x,c=(r.height-l.height)/2+ea.y;n.drawImage(e,o,c,l.width,l.height),a.drawImage(s,0,0),t.toBlob(e=>{if(!e)return;let t=(null==em?void 0:em.getCell("images",ex[0],"name")).replace(/\.(png|jpg|jpeg|gif)$/i,"");(0,i.saveAs)(e,"".concat(t,"_full.png")),M(!1),et(!1),ei(!1)},"image/png")}}else{let e=document.getElementById("crop-container");if(!e)return;let t=document.createElement("canvas"),a=t.getContext("2d");if(!a)return;t.width=(null==Q?void 0:Q.width)||0,t.height=(null==Q?void 0:Q.height)||0;let r=document.createElement("canvas"),s=r.getContext("2d");if(!s)return;let n=e.getBoundingClientRect();if(r.width=n.width,r.height=n.height,H&&V){let e=new Image;e.onload=()=>{let l,o,c,d;let g=e.width/e.height,h=r.width/r.height;g>h?(d=e.height,c=e.height*h,l=(e.width-c)/2,o=0):(c=e.width,d=e.width/h,l=0,o=(e.height-d)/2),s.drawImage(e,l,o,c,d,0,0,r.width,r.height);let u=eh.current,m=u.getBoundingClientRect(),x=(n.width-m.width)/2+ea.x,f=(n.height-m.height)/2+ea.y;s.drawImage(u,x,f,m.width,m.height),a.drawImage(r,(null==Q?void 0:Q.x)||0,(null==Q?void 0:Q.y)||0,(null==Q?void 0:Q.width)||0,(null==Q?void 0:Q.height)||0,0,0,(null==Q?void 0:Q.width)||0,(null==Q?void 0:Q.height)||0),t.toBlob(e=>{if(!e)return;let t=(null==em?void 0:em.getCell("images",ex[0],"name")).replace(/\.(png|jpg|jpeg|gif)$/i,"");(0,i.saveAs)(e,"".concat(t,"_cropped.png")),M(!1),et(!1),ei(!1)},"image/png")},e.src=V}else{s.fillStyle="transparent"===x?"rgba(0, 0, 0, 0)":x,s.fillRect(0,0,r.width,r.height);let e=eh.current,l=e.getBoundingClientRect(),o=(n.width-l.width)/2+ea.x,c=(n.height-l.height)/2+ea.y;s.drawImage(e,o,c,l.width,l.height),a.drawImage(r,(null==Q?void 0:Q.x)||0,(null==Q?void 0:Q.y)||0,(null==Q?void 0:Q.width)||0,(null==Q?void 0:Q.height)||0,0,0,(null==Q?void 0:Q.width)||0,(null==Q?void 0:Q.height)||0),t.toBlob(e=>{if(!e)return;let t=(null==em?void 0:em.getCell("images",ex[0],"name")).replace(/\.(png|jpg|jpeg|gif)$/i,"");(0,i.saveAs)(e,"".concat(t,"_cropped.png")),M(!1),et(!1),ei(!1)},"image/png")}}}},[Q,em,ex,x,H,V,ea,ee,el]),eR=(0,o.useCallback)(()=>{if(H&&V){let e=new Image;e.onload=()=>{J({width:e.width,height:e.height}),eu.current=e},e.src=V}else J(null),eu.current=null},[V,H]);(0,o.useEffect)(()=>{R&&eR()},[R,eR]),(0,o.useEffect)(()=>{if(R&&(null==em?void 0:em.hasTable("images"))&&ex.length>0)try{let e=ex[0],t=localStorage.getItem("image-settings-".concat(e));if(t){let e=JSON.parse(t);e.position&&er(e.position),e.scale&&ec(e.scale)}}catch(e){console.error("Error loading image settings from localStorage:",e)}},[R,ex,em]),(0,o.useEffect)(()=>{if((null==em?void 0:em.hasTable("images"))&&ex.length>0&&(0!==ea.x||0!==ea.y||1!==eo))try{let e=ex[0],t={};try{let a=localStorage.getItem("image-settings-".concat(e));a&&(t=JSON.parse(a))}catch(e){console.error("Error parsing existing settings:",e)}let a={...t,position:ea,scale:eo};localStorage.setItem("image-settings-".concat(e),JSON.stringify(a))}catch(e){console.error("Error saving image settings to localStorage:",e)}},[ea,eo,ex,em]),(0,o.useEffect)(()=>{if((null==em?void 0:em.hasTable("images"))&&ex.length>0&&A)try{let e=ex[0],t=localStorage.getItem("image-settings-".concat(e));if(t){let e=JSON.parse(t);e.position&&er(e.position),e.scale&&ec(e.scale)}}catch(e){console.error("Error loading image settings from localStorage:",e)}},[ex,em,A]);let eM=(0,o.useCallback)(e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let r=new FileReader;r.onload=()=>{q(r.result),Z(a)},r.readAsDataURL(a)},[]),eU=(0,o.useCallback)(()=>{var e;null===(e=eg.current)||void 0===e||e.click()},[]);(0,o.useCallback)(e=>{},[]),(0,o.useCallback)(()=>{M(!0),D(!0),Y("crop")},[]);let eT=(0,o.useCallback)(()=>{T(!1),M(!1),D(!1)},[]);(0,o.useCallback)(()=>{T(!0),D(!0),Y("mask")},[]);let eF=(0,o.useCallback)(e=>{O(e),em&&ex.length>0&&em.transaction(()=>{null==em||em.setCell("images","".concat(ex[0]),"transformedImageUrl",e)}),T(!1)},[em,ex]);return u?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h2",{className:"mb-2 text-lg text-danger",children:"Unable to Load Resources"}),(0,r.jsx)("div",{className:"rounded-xl border border-danger/20 bg-dangerForeground px-4 py-3",children:(0,r.jsx)("p",{className:"text-danger",children:"Please refresh the page and try again. If the problem persists, contact support."})})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,r.jsxs)("div",{className:"w-full max-w-[640px] flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-full flex flex-col sm:flex-row items-center justify-between gap-4 sm:gap-0 mb-4",children:(null==em?void 0:em.hasTable("images"))&&ex.length>0&&A&&(0,r.jsx)("div",{className:"w-full mb-4 overflow-hidden rounded-xl shadow-sm bg-gradient-to-r from-[#6C5CE7]/5 to-[#5a4bd4]/5 backdrop-blur-sm border border-[#6C5CE7]/10",children:(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-3",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-1.5",children:[(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"size-4",children:[(0,r.jsx)("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),(0,r.jsx)("span",{children:"Background"})]}),(0,r.jsxs)("div",{className:"flex rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 shadow-sm",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>K(!1),className:(0,n.cn)("px-3 py-1.5 text-sm font-medium flex items-center gap-1 transition-all duration-300",H?"bg-white text-gray-600 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700":"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm"),children:[(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"size-3.5",children:(0,r.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),(0,r.jsx)("span",{children:"Color"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>K(!0),className:(0,n.cn)("px-3 py-1.5 text-sm font-medium flex items-center gap-1 transition-all duration-300",H?"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm":"bg-white text-gray-600 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"size-3.5",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,r.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,r.jsx)("polyline",{points:"21 15 16 10 5 21"})]}),(0,r.jsx)("span",{children:"Image"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-1 sm:mt-0",children:[H&&(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-1.5 invisible",children:[(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"size-4",children:(0,r.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),(0,r.jsx)("span",{children:"Action"})]}),(0,r.jsxs)("button",{onClick:eU,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-white bg-gray-900 hover:bg-gray-800 dark:bg-white dark:text-gray-900 dark:hover:bg-gray-100 rounded-lg shadow-sm hover:shadow-md transition-all duration-300",children:[(0,r.jsx)(d.oSY,{className:"size-3.5"}),(0,r.jsx)("span",{children:"Upload Background"}),(0,r.jsx)("input",{ref:eg,type:"file",accept:"image/*",onChange:eM,className:"hidden","aria-label":"Upload custom background"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-1.5",children:[(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"size-4",children:[(0,r.jsx)("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),(0,r.jsx)("span",{children:"Preview"})]}),(0,r.jsxs)("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-0.5 shadow-sm",children:[(0,r.jsx)("button",{onClick:()=>N(!1),className:(0,n.cn)("px-3 py-1.5 text-sm font-medium rounded-lg transition-all duration-300",j?"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700":"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm"),children:"Before"}),(0,r.jsx)("button",{onClick:()=>N(!0),className:(0,n.cn)("px-3 py-1.5 text-sm font-medium rounded-lg transition-all duration-300",j?"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700"),children:"After"})]})]})]})]}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 border border-gray-200 dark:border-gray-700 shadow-sm",children:H?(0,r.jsx)("div",{children:(0,r.jsx)(w,{selectedBackground:V,onSelectBackground:e=>q(e),rightElement:null})}):(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[C.map(e=>{let{id:t,color:a}=e;return(0,r.jsx)("button",{onClick:()=>{v(a),B(!1)},className:(0,n.cn)("group relative size-10 rounded-full transition-all duration-300 hover:scale-110",x!==a||z?"ring-2 ring-gray-200 dark:ring-gray-600 hover:ring-gray-300 dark:hover:ring-gray-500 shadow-sm":"ring-2 ring-gray-900 dark:ring-white shadow-lg scale-110","transparent"===t&&"bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGElEQVQYlWNgYGCQwoKxgqGgcJA5h3yFAAs8BRWVSwooAAAAAElFTkSuQmCC')] bg-repeat"),style:{backgroundColor:"transparent"===a?"transparent":a},"aria-label":"Select ".concat(t," background"),children:x===a&&!z&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"size-5 text-white drop-shadow-md",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})})})},t)}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>{var e;B(!0),v(S),null===(e=ed.current)||void 0===e||e.click()},className:(0,n.cn)("group relative size-10 rounded-full transition-all duration-300 hover:scale-110 flex items-center justify-center",z?"ring-2 ring-gray-900 dark:ring-white shadow-lg scale-110":"ring-2 ring-gray-200 dark:ring-gray-600 hover:ring-gray-300 dark:hover:ring-gray-500 shadow-sm"),style:{backgroundColor:S},"aria-label":"Select custom color",children:[!z&&(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",className:"size-6 drop-shadow-md",children:(0,r.jsx)("path",{d:"M12 2v20M2 12h20"})}),z&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"size-5 text-white drop-shadow-md",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]}),(0,r.jsx)("input",{ref:ed,type:"color",value:S,onChange:e=>{I(e.target.value),v(e.target.value),B(!0)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Custom color picker"})]})]})})]})})}),(0,r.jsxs)("div",{...ev(),className:(0,n.cn)("relative aspect-[3/2] w-full",ej&&"pointer-events-none",ee&&A&&"cursor-move",A&&!ee&&"pointer-events-none"),children:[(e||a)&&(0,r.jsxs)("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 text-[#6C5CE7]",children:[(0,r.jsx)(d.WUS,{className:"size-5 animate-spin"}),(0,r.jsx)("span",{className:"font-medium",children:"Wait, we're working on it."})]}),(0,r.jsx)("div",{className:"mt-2 text-sm text-[#6C5CE7]/70",children:"Loading our AI model for the best results..."})]}),(0,r.jsxs)("div",{className:(0,n.cn)("flex size-full flex-col items-center justify-center rounded-xl border-2 border-white bg-white shadow-lg transition-all duration-300 overflow-hidden",ek?"border-success bg-success/5":eC?"border-danger bg-danger/5":ej?"border-[#6C5CE7] bg-[#6C5CE7]/5":"bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGElEQVQYlWNgYGCQwoKxgqGgcJA5h3yFAAs8BRWVSwooAAAAAElFTkSuQmCC')] bg-repeat",(null==em?void 0:em.hasTable("images"))&&ex.length>0&&"bg-none",(e||a)&&"filter blur-[2px] transition-all duration-300",ee&&"relative"),onMouseDown:A&&ee?e=>{ee&&en({x:e.clientX-ea.x,y:e.clientY-ea.y})}:void 0,onMouseMove:A&&ee?e=>{ee&&es&&er({x:e.clientX-es.x,y:e.clientY-es.y})}:void 0,onMouseUp:A&&ee?eE:void 0,onMouseLeave:A&&ee?eE:void 0,onTouchStart:eS,style:(null==em?void 0:em.hasTable("images"))&&ex.length>0?{backgroundImage:"".concat("transparent"!==x||H?H&&V?"url(".concat(j?null==em?void 0:em.getCell("images",ex[0],"transformedImageUrl"):null==em?void 0:em.getCell("images",ex[0],"imageUrl"),"), url(").concat(V,")"):"url(".concat(j?null==em?void 0:em.getCell("images",ex[0],"transformedImageUrl"):null==em?void 0:em.getCell("images",ex[0],"imageUrl"),")"):"url(".concat(j?null==em?void 0:em.getCell("images",ex[0],"transformedImageUrl"):null==em?void 0:em.getCell("images",ex[0],"imageUrl"),"), url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGElEQVQYlWNgYGCQwoKxgqGgcJA5h3yFAAs8BRWVSwooAAAAAElFTkSuQmCC')")),backgroundSize:"transparent"!==x||H?H&&V?"contain, cover":"contain":"contain, 10px 10px",backgroundPosition:"center",backgroundRepeat:"transparent"!==x||H?H&&V?"no-repeat, no-repeat":"no-repeat":"no-repeat, repeat",backgroundColor:"transparent"===x||H?"transparent":x}:{},children:[(0,r.jsx)("input",{...ew(),className:"hidden",accept:"image/jpeg,image/png,image/webp","aria-hidden":"true"}),(!(null==em?void 0:em.hasTable("images"))||0===ex.length)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"py-6",children:(0,r.jsx)("button",{type:"button",disabled:e,className:(0,n.cn)("inline-flex w-fit items-center justify-center overflow-hidden rounded-xl bg-gradient-to-r from-[#6C5CE7] to-[#5a4bd4] px-6 py-3 text-white transition-all duration-200 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#6C5CE7] focus-visible:ring-offset-2",e&&"opacity-70 cursor-not-allowed"),children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[e?(0,r.jsx)(d.WUS,{className:"size-6 animate-spin"}):(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"size-6",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_8829_13883)",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"12",fillOpacity:"0.15"}),(0,r.jsx)("path",{d:"M18 11H13V6C13 5.73478 12.8946 5.48043 12.7071 5.29289C12.5196 5.10536 12.2652 5 12 5C11.7348 5 11.4804 5.10536 11.2929 5.29289C11.1054 5.48043 11 5.73478 11 6V11H6C5.73478 11 5.48043 11.1054 5.29289 11.2929C5.10536 11.4804 5 11.7348 5 12C5 12.2652 5.10536 12.5196 5.29289 12.7071C5.48043 12.8946 5.73478 13 6 13H11V18C11 18.2652 11.1054 18.5196 11.2929 18.7071C11.4804 18.8946 11.7348 19 12 19C12.2652 19 12.5196 18.8946 12.7071 18.7071C12.8946 18.5196 13 18.2652 13 18V13H18C18.2652 13 18.5196 12.8946 18.7071 12.7071C18.8946 12.5196 19 12.2652 19 12C19 11.7348 18.8946 11.4804 18.7071 11.2929C18.5196 11.1054 18.2652 11 18 11Z"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_8829_13883",children:(0,r.jsx)("rect",{width:"24",height:"24"})})})]}),(0,r.jsx)("span",{className:"font-semibold",children:e?"Wait, we&apos;re working on it.":"Start from a photo"})]})})}),(0,r.jsx)("div",{className:"font-semibold text-gray-900",children:e?"":"Or drop an image here"})]})]}),ej&&(0,r.jsx)("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center rounded-xl bg-white/30 backdrop-blur-sm transition-all duration-300",children:(0,r.jsxs)("div",{className:"text-lg font-semibold text-[#6C5CE7] flex items-center gap-2",children:[(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"size-6 animate-bounce",children:[(0,r.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,r.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,r.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Drop your image here"]})})]})]}),(null==em?void 0:em.hasTable("images"))&&ex.length>0&&(0,r.jsx)("div",{className:"w-full max-w-[640px] flex justify-center mt-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap justify-center gap-3",children:[A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{type:"button",onClick:eA,className:"w-full sm:w-auto group relative overflow-hidden bg-gray-900 hover:bg-gray-800 dark:bg-white dark:hover:bg-gray-100 text-white dark:text-gray-900 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 px-6 py-3 rounded-xl font-semibold",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(d.$0x,{className:"mr-2 size-4 transition-transform duration-200 group-hover:translate-y-[2px]"}),(0,r.jsx)("span",{children:"Download"})]})}),(0,r.jsx)(f,{type:"button",onClick:()=>D(!0),className:"w-full sm:w-auto group relative overflow-hidden bg-gray-900 hover:bg-gray-800 dark:bg-white dark:hover:bg-gray-100 text-white dark:text-gray-900 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 px-6 py-3 rounded-xl font-semibold",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(d.C5v,{className:"mr-2 size-4 transition-all duration-200 group-hover:rotate-12"}),(0,r.jsx)("span",{children:"Edit Image"})]})})]}):(0,r.jsxs)(f,{type:"button",onClick:eN,disabled:a||e,className:(0,n.cn)("w-full sm:w-auto group relative overflow-hidden bg-gradient-to-r from-[#6C5CE7] to-[#5a4bd4] text-white shadow-lg transition-all hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] px-8 py-2.5 rounded-full",(a||e)&&"pl-12"),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"}),(a||e)&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-4 flex items-center",children:(0,r.jsx)(d.WUS,{className:"size-5 animate-spin"})}),(0,r.jsxs)("div",{className:"relative flex items-center",children:[!a&&!e&&(0,r.jsx)(d.cgd,{className:"mr-2 size-5 transition-transform duration-200 group-hover:scale-110"}),(0,r.jsx)("span",{className:"font-medium",children:a||e?"Processing...":"Process Image"})]})]}),(0,r.jsx)(f,{type:"button",onClick:()=>{if((null==em?void 0:em.hasTable("images"))&&ex.length>0)try{ex.forEach(e=>{localStorage.removeItem("image-settings-".concat(e))})}catch(e){console.error("Error clearing image settings from localStorage:",e)}null==em||em.transaction(()=>{null==em||em.delTable("images")}),N(!1),v("transparent"),E(!1),q(null),K(!1),et(!1),er({x:0,y:0}),ei(!1),ec(1)},variant:"outline",className:"w-full sm:w-auto group relative overflow-hidden border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-white shadow-sm hover:shadow-md transition-all duration-300 transform hover:scale-105 px-6 py-3 rounded-xl font-semibold",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"mr-2.5 size-5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-full flex items-center justify-center transition-transform duration-200 group-hover:scale-110 shadow-sm",children:(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,r.jsx)("path",{d:"M12 5v14M5 12h14"})})}),(0,r.jsx)("span",{children:"Upload New"})]})})]})})]}),(0,r.jsx)(b.ZA,{isOpen:F,onOpenChange:e=>{e||eT()},isDismissable:!0,className:e=>{let{isEntering:t,isExiting:a}=e;return"\n                fixed inset-0 z-50 overflow-y-auto bg-black/50 flex min-h-full items-center justify-center p-2 sm:p-4 text-center backdrop-blur-sm\n                ".concat(t?"animate-in fade-in duration-300 ease-out":"","\n                ").concat(a?"animate-out fade-out duration-200 ease-in":"","\n                ")},children:(0,r.jsx)(b.u_,{className:e=>{let{isEntering:t,isExiting:a}=e;return"\n                    w-full max-w-[calc(100vw-1rem)] sm:max-w-4xl overflow-hidden rounded-2xl bg-white p-3 sm:p-6 text-left align-middle shadow-xl\n                    ".concat(t?"animate-in zoom-in-95 ease-out duration-300":"","\n                    ").concat(a?"animate-out zoom-out-95 ease-in duration-200":"","\n                    ")},children:(0,r.jsxs)(y.Vq,{className:"relative outline-none",children:[(0,r.jsxs)("div",{className:"mb-3 sm:mb-4 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-1",children:"Edit Image"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Choose an editing tool below to modify your image"})]}),(0,r.jsx)("button",{onClick:eT,className:"flex size-7 items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-gray-200 transition-colors absolute right-0 top-0",children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"size-5",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,r.jsxs)("div",{className:"flex overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700 mb-4 shadow-sm",children:[(0,r.jsxs)("button",{onClick:()=>{Y("crop"),M(!0),T(!1)},className:(0,n.cn)("flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-all duration-300","crop"===W?"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm":"bg-white text-gray-600 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,r.jsx)(d.l_M,{className:"size-3.5"}),(0,r.jsx)("span",{children:"Crop & Resize"})]}),(0,r.jsxs)("button",{onClick:()=>{Y("mask"),T(!0),M(!1)},className:(0,n.cn)("flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-all duration-300","mask"===W?"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm":"bg-white text-gray-600 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,r.jsx)(d.r3Y,{className:"size-3.5"}),(0,r.jsx)("span",{children:"Edit Mask"})]})]}),"crop"===W&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center gap-2 self-end",children:[(0,r.jsxs)("div",{className:"flex overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[(0,r.jsxs)("button",{onClick:()=>{et(!1),ei(!1)},className:(0,n.cn)("flex items-center gap-1 px-2.5 sm:px-3 py-1.5 text-sm font-medium transition-all duration-300",ee||el?"bg-white text-gray-600 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700":"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm"),children:[(0,r.jsx)(d.l_M,{className:"size-3.5"}),(0,r.jsx)("span",{className:"hidden xs:inline",children:"Crop"})]}),(0,r.jsxs)("button",{onClick:()=>{et(!0),ei(!1)},className:(0,n.cn)("flex items-center gap-1 px-2.5 sm:px-3 py-1.5 text-sm font-medium transition-all duration-300",ee&&!el?"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm":"bg-white text-gray-600 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,r.jsx)(d.iaM,{className:"size-3.5"}),(0,r.jsx)("span",{className:"hidden xs:inline",children:"Move"})]}),(0,r.jsxs)("button",{onClick:()=>{et(!1),ei(!0)},className:(0,n.cn)("flex items-center gap-1 px-2.5 sm:px-3 py-1.5 text-sm font-medium transition-all duration-300",el?"bg-gray-900 text-white dark:bg-white dark:text-gray-900 shadow-sm":"bg-white text-gray-600 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,r.jsx)(d.qxL,{className:"size-3.5"}),(0,r.jsx)("span",{className:"hidden xs:inline",children:"Resize"})]})]}),(ee||el)&&(0,r.jsxs)("button",{onClick:()=>{if(er({x:0,y:0}),ec(1),(null==em?void 0:em.hasTable("images"))&&ex.length>0)try{let e=ex[0];localStorage.removeItem("image-settings-".concat(e))}catch(e){console.error("Error removing image settings from localStorage:",e)}},className:"flex items-center gap-1 px-2.5 py-1.5 text-sm font-medium text-gray-600 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-300 shadow-sm",children:[(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"size-3.5",children:[(0,r.jsx)("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),(0,r.jsx)("path",{d:"M21 3v5h-5"}),(0,r.jsx)("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),(0,r.jsx)("path",{d:"M3 21v-5h5"})]}),(0,r.jsx)("span",{className:"hidden xs:inline",children:"Reset"})]})]}),(0,r.jsx)("div",{className:"relative p-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGElEQVQYlWNgYGCQwoKxgqGgcJA5h3yFAAs8BRWVSwooAAAAAElFTkSuQmCC')] rounded-lg overflow-auto",style:{backgroundColor:H?"transparent":x,backgroundImage:H&&V?"url(".concat(V,")"):"none",backgroundSize:"cover",backgroundPosition:"center"},children:(0,r.jsx)("div",{className:"relative w-full flex items-center justify-center",style:{minHeight:H&&X?"auto":"40vh",maxHeight:"70vh",backgroundColor:H?"transparent":x,backgroundImage:H&&V?"url(".concat(V,")"):"none",backgroundSize:"cover",backgroundPosition:"center",...H&&X&&{aspectRatio:"".concat(X.width," / ").concat(X.height)}},children:ee||el?el?(0,r.jsx)("div",{className:"flex items-center justify-center relative w-full h-full cursor-ns-resize",id:"crop-container",style:{minHeight:H&&X?"auto":"40vh",padding:0,margin:0,boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.2)",...H&&X&&{aspectRatio:"".concat(X.width," / ").concat(X.height)}},onMouseDown:eS,onMouseMove:eI,onMouseUp:ez,onMouseLeave:ez,onTouchStart:eS,onTouchMove:eI,onTouchEnd:ez,children:(0,r.jsx)("img",{ref:eh,src:null==em?void 0:em.getCell("images",ex[0],"transformedImageUrl"),alt:"Resize",className:(0,n.cn)("max-w-full object-contain relative z-10 p-0 m-0",H&&X?"max-h-full":"max-h-[40vh] sm:max-h-[60vh]"),style:{padding:0,margin:0,transform:"translate(".concat(ea.x,"px, ").concat(ea.y,"px) scale(").concat(eo,")"),transformOrigin:"center"}})}):(0,r.jsx)("div",{className:"flex items-center justify-center relative w-full h-full cursor-move",id:"crop-container",style:{minHeight:H&&X?"auto":"40vh",padding:0,margin:0,boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.2)",...H&&X&&{aspectRatio:"".concat(X.width," / ").concat(X.height)}},onMouseDown:e=>{en({x:e.clientX-ea.x,y:e.clientY-ea.y}),e.preventDefault()},onMouseMove:e=>{es&&(er({x:e.clientX-es.x,y:e.clientY-es.y}),e.preventDefault())},onMouseUp:e=>{en(null),e.preventDefault()},onMouseLeave:e=>{en(null),e.preventDefault()},onTouchStart:e=>{let t=e.touches[0];en({x:t.clientX-ea.x,y:t.clientY-ea.y}),e.preventDefault()},onTouchMove:e=>{if(es){let t=e.touches[0];er({x:t.clientX-es.x,y:t.clientY-es.y}),e.preventDefault()}},onTouchEnd:e=>{en(null),e.preventDefault()},children:(0,r.jsx)("img",{ref:eh,src:null==em?void 0:em.getCell("images",ex[0],"transformedImageUrl"),alt:"Position",className:(0,n.cn)("max-w-full object-contain relative z-10 p-0 m-0",H&&X?"max-h-full":"max-h-[40vh] sm:max-h-[60vh]"),style:{padding:0,margin:0,transform:"translate(".concat(ea.x,"px, ").concat(ea.y,"px) scale(").concat(eo,")")}})}):(0,r.jsx)(p.ZP,{crop:P,onChange:e=>G(e),onComplete:e=>_(e),aspect:void 0,className:"rounded-lg overflow-hidden w-full h-full",minWidth:0,minHeight:0,ruleOfThirds:!0,style:{margin:0,padding:0},children:(0,r.jsx)("div",{className:"flex items-center justify-center relative w-full h-full p-0 m-0",id:"crop-container",style:{minHeight:H&&X?"auto":"40vh",padding:0,margin:0,boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.2)",...H&&X&&{aspectRatio:"".concat(X.width," / ").concat(X.height)}},children:(0,r.jsx)("img",{ref:eh,src:null==em?void 0:em.getCell("images",ex[0],"transformedImageUrl"),alt:"Crop",className:(0,n.cn)("max-w-full object-contain relative z-10 p-0 m-0",H&&X?"max-h-full":"max-h-[40vh] sm:max-h-[60vh]"),style:{padding:0,margin:0,transform:"translate(".concat(ea.x,"px, ").concat(ea.y,"px) scale(").concat(eo,")")}})})})})}),(0,r.jsx)("div",{className:"mt-4 sm:mt-5 flex justify-end gap-2 sm:gap-3",children:(0,r.jsx)(f,{type:"button",onClick:eB,disabled:!ee&&!el&&!Q,className:"px-3 sm:px-6 py-2 bg-gradient-to-r from-[#6C5CE7] to-[#5a4bd4] text-white transition-all hover:shadow-lg disabled:opacity-50 disabled:hover:shadow-none disabled:cursor-not-allowed rounded-full",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.$0x,{className:"mr-2 size-4"}),(0,r.jsxs)("span",{className:"font-medium text-xs sm:text-sm",children:["Download ",el?"Resized":ee?"Positioned":"Cropped"]})]})})})]}),"mask"===W&&(null==em?void 0:em.hasTable("images"))&&ex.length>0&&(0,r.jsx)("div",{children:(0,r.jsx)(k,{originalImage:null==em?void 0:em.getCell("images",ex[0],"imageUrl"),removedBgImage:null==em?void 0:em.getCell("images",ex[0],"transformedImageUrl"),mask:L||void 0,onSave:eF,onClose:()=>T(!1),isInline:!0})})]})})}),U&&!F&&(null==em?void 0:em.hasTable("images"))&&ex.length>0&&(0,r.jsx)(k,{originalImage:null==em?void 0:em.getCell("images",ex[0],"imageUrl"),removedBgImage:null==em?void 0:em.getCell("images",ex[0],"transformedImageUrl"),mask:L||void 0,onSave:eF,onClose:()=>T(!1)})]})}},2635:function(e,t,a){"use strict";a.d(t,{BX:function(){return s},Q:function(){return k},T0:function(){return c},WQ:function(){return d},oR:function(){return F},zt:function(){return n}});var r=a(2921);let s={images:{id:{type:"string"},name:{type:"string"},mediaType:{type:"string"},size:{type:"number"},imageUrl:{type:"string"},transformedImageUrl:{type:"string"},height:{type:"number"},width:{type:"number"}}},{Provider:n,useCreateIndexes:l,useCreateRelationships:i,useCreatePersister:o,useCreateQueries:c,useCreateStore:d,CellProps:g,useTable:h,useResultTable:u,useResultRow:m,RowView:x,useAddRowCallback:f,useCell:p,useHasTable:b,useValue:y,useHasValue:v,useHasRow:w,useDelRowCallback:j,useRowIds:k,useSetPartialRowCallback:C,useSetPartialValuesCallback:N,useRelationships:A,RemoteRowView:E,useQueries:S,useResultCell:I,useResultSortedRowIds:z,useResultTableCellIds:B,useSetCellCallback:R,useSliceIds:M,useIndexes:U,useSliceRowIds:T,useStore:F,useLocalRowIds:D,CellView:W,ResultCellProps:Y,ResultCellView:L,ResultRowView:O}=r},9354:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(8591),s=a(4516);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}}]);